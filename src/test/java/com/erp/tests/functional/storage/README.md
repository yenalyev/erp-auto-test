# Functional Tests: Storages (Бізнес Юніти)

## Огляд
Цей набір тестів забезпечує повне покриття життєвого циклу та верифікацію цілісності даних для модуля **Storages** у розділі Master Data. Склади є основними вузлами для зберігання ресурсів та готової продукції, тому стабільність їхнього обліку є критичною для роботи всієї ERP-системи.

---

## Тестові сценарії

| ID | Назва сценарію | Опис перевірки | Severity |
|:---|:---|:---|:---|
| **TC-STR-001** | Happy Path: Створення | Успішне створення складу ADMIN-користувачем, валідація JSON-схеми та перевірка персистентності в БД. | **Critical** |
| **TC-STR-002** | Валідація даних | Data-driven перевірка обов'язковості поля `name` (Null/Empty) та лімітів довжини (Boundary Testing). | **Normal** |
| **TC-STR-003** | Контроль унікальності | Заборона створення дублікатів за назвою та верифікація цілісності БД (Integrity Check). | **Critical** |

---

## Деталізація функціоналу

### 1. Позитивний сценарій (Happy Path)
* **Contract Validation:** Використання JSON Schema для перевірки структури об'єкта Storage.
* **Database Sync:** Перевірка через Reflection API — автоматичне порівняння полів `Request` vs `Response` vs `Database` (через GET запит).

### 2. Валідація вхідних даних (Data Quality)
* **Mandatory Fields:** Система має відхиляти запити, якщо назва складу відсутня або порожня.
* **Boundary Testing:** Верифікація обмеження довжини назви (255 символів) для запобігання помилкам переповнення на рівні бази даних.

### 3. Бізнес-правила та цілісність (Business Rules)
* **Uniqueness:** Перевірка унікальності назви складу. Система не повинна дозволяти створення двох складів з однаковим ім'ям у межах однієї організації.
* **Integrity Check:** Використання `DatabaseIntegrityValidator` для гарантії того, що при невдалій спробі створення кількість складів у базі залишається незмінною (відсутність "фантомних" записів).

---

## Технічні особливості
* **Паралелізація:** Використання `DataUtils.generateWithUniqueSuffix()` для повної ізоляції даних між паралельними потоками.
* **Фікстури:** Використання `storageFixture.setupDynamicBusinessUnit()` для підготовки початкового стану системи перед тестами.
* **Звітність:** Allure-кроки розбиті на фази `STEP 1: Create`, `STEP 2: Validate`, `STEP 3: Verify Persistence`.